(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{229:function(t,s,a){"use strict";a.r(s);var n=a(0),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("Webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("Webpack 的构建流程可以分为以下三大阶段：")]),t._v(" "),t._m(7),t._v(" "),s("p",[t._v("如果只执行一次构建，以上阶段将会按照顺序各执行一次。但在开启监听模式下，流程将变为如下：")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._m(19),t._v(" "),t._m(20),t._v(" "),s("p",[t._v("所谓通用模块，就是如react，react-dom，redux，axios几乎每个页面都会应用到的js模块。")]),t._v(" "),s("p",[t._v("将这些js模块提取出来放到一个文件中，不仅可以缩小主文件的大小，在第一次下载的时候能并行下载，提高加载效率，更重要的是这些文件的代码几乎不会变动，那么每次打包发布后，仍然会沿用缓存，从而提高了加载效率。")]),t._v(" "),s("p",[t._v("而对于那些多文件入口的应用更是有效，因为在加载不同的页面时，这部分代码是公共的，直接可以从缓存中应用。这个东西不需要安装，直接修改webpack的配置文件即可：")]),t._v(" "),t._m(21),t._m(22),t._v(" "),s("p",[t._v("image-webpack-loader")]),t._v(" "),t._m(23),t._v(" "),s("p",[t._v("webpack中的devtool改为false，不需要热加载这类只用于开发环境的东西。对于在开发环境下才有用的东西在打包到生产环境时通通去掉。")]),t._v(" "),t._m(24),t._v(" "),s("p",[t._v("webpack中的hash值时，一般都会看到[hash]和[chunkhash]两种hash值的配置。")]),t._v(" "),s("p",[t._v("其中hash根据每次编译的内容计算得到，所以每编译一次所有文件都会生成一个新的hash，也就完全无法利用缓存。所以我们这里用了[chunkhash]，chunkhash是根据内容来生成的，所以如果内容不改变，那么生成的hash值就不会改变。chunkhash适用于一般的情况，但是，对于我们以上的情况是不适用的。")]),t._v(" "),s("p",[t._v("我去改变主文件代码，然后生成的两个公共js代码的chunkhash值却改变了，它们并没有使用到主文件。")]),t._v(" "),t._m(25),t._v(" "),s("p",[t._v("之前常见的 UglifyJs 插件来压缩js，但是在生产环境打包的时候很慢，这时候其实在压缩代码，由于压缩 JavaScript 代码需要先把代码解析成用 Object 抽象表示的 AST 语法树，再去应用各种规则分析和处理 AST，导致这个过程计算量巨大，耗时非常多。")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/gdborton/webpack-parallel-uglify-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("ParallelUglifyPlugin"),s("OutboundLink")],1),t._v(" 就做了这个事情。 当 Webpack 有多个 JavaScript 文件需要输出和压缩时，原本会使用 UglifyJS 去一个个挨着压缩再输出， 但是 ParallelUglifyPlugin 则会开启多个子进程，把对多个文件的压缩工作分配给多个子进程去完成，每个子进程其实还是通过 UglifyJS 去压缩代码，但是变成了并行执行。 所以 ParallelUglifyPlugin 能更快的完成对多个文件的压缩工作。")]),t._v(" "),t._m(26),s("blockquote",[s("p",[s("a",{attrs:{href:"https://github.com/mishoo/UglifyJS2/tree/harmony",target:"_blank",rel:"noopener noreferrer"}},[t._v("UglifyES"),s("OutboundLink")],1),t._v(" 是 UglifyJS 的变种，专门用于压缩 ES6 代码，它们两都出自于同一个项目，并且它们两不能同时使用。")]),t._v(" "),s("p",[t._v("UglifyES 一般用于给比较新的 JavaScript 运行环境压缩代码，例如用于 ReactNative 的代码运行在兼容性较好的 JavaScriptCore 引擎中，为了得到更好的性能和尺寸，采用 UglifyES 压缩效果会更好。")]),t._v(" "),s("p",[t._v("ParallelUglifyPlugin 同时内置了 UglifyJS 和 UglifyES，也就是说 ParallelUglifyPlugin 支持并行压缩 ES6 代码。")])])])}),[function(){var t=this._self._c;return t("h1",{attrs:{id:"webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[this._v("#")]),this._v(" Webpack")])},function(){var t=this._self._c;return t("h2",{attrs:{id:"webpack打包原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack打包原理"}},[this._v("#")]),this._v(" Webpack打包原理")])},function(){var t=this._self._c;return t("h3",{attrs:{id:"基本概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[this._v("#")]),this._v(" 基本概念")])},function(){var t=this,s=t._self._c;return s("ul",[s("li",[s("strong",[t._v("Entry")]),t._v("：入口，Webpack 执行构建的第一步将从 Entry 开始，可抽象成输入。")]),t._v(" "),s("li",[s("strong",[t._v("Module")]),t._v("：模块，在 Webpack 里一切皆模块，一个模块对应着一个文件。Webpack 会从配置的 Entry 开始递归找出所有依赖的模块。")]),t._v(" "),s("li",[s("strong",[t._v("Chunk")]),t._v("：代码块，一个 Chunk 由多个模块组合而成，用于代码合并与分割。")]),t._v(" "),s("li",[s("strong",[t._v("Loader")]),t._v("：模块转换器，用于把模块原内容按照需求转换成新内容。")]),t._v(" "),s("li",[s("strong",[t._v("Plugin")]),t._v("：扩展插件，在 Webpack 构建流程中的特定时机会广播出对应的事件，插件可以监听这些事件的发生，在特定时机做对应的事情。")])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"流程概括"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#流程概括"}},[this._v("#")]),this._v(" 流程概括")])},function(){var t=this,s=t._self._c;return s("ol",[s("li",[t._v("初始化参数：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数；")]),t._v(" "),s("li",[t._v("开始编译：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译；")]),t._v(" "),s("li",[t._v("确定入口：根据配置中的 entry 找出所有的入口文件；")]),t._v(" "),s("li",[t._v("编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；")]),t._v(" "),s("li",[t._v("完成模块编译：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；")]),t._v(" "),s("li",[t._v("输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；")]),t._v(" "),s("li",[t._v("输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统。")])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"流程细节"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#流程细节"}},[this._v("#")]),this._v(" 流程细节")])},function(){var t=this._self._c;return t("ol",[t("li",[this._v("初始化：启动构建，读取与合并配置参数，加载 Plugin，实例化 Compiler。")]),this._v(" "),t("li",[this._v("编译：从 Entry 发出，针对每个 Module 串行调用对应的 Loader 去翻译文件内容，再找到该 Module 依赖的 Module，递归地进行编译处理。")]),this._v(" "),t("li",[this._v("输出：对编译后的 Module 组合成 Chunk，把 Chunk 转换成文件，输出到文件系统。")])])},function(){var t=this._self._c;return t("p",[t("img",{attrs:{src:"http://webpack.wuhaolin.cn/5%E5%8E%9F%E7%90%86/img/5-1%E7%9B%91%E5%90%AC%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B.png",alt:"border"}})])},function(){var t=this._self._c;return t("h3",{attrs:{id:"初始化阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#初始化阶段"}},[this._v("#")]),this._v(" 初始化阶段")])},function(){var t=this,s=t._self._c;return s("table",[s("thead",[s("tr",[s("th",[t._v("事件名")]),t._v(" "),s("th",[t._v("解释")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("初始化参数")]),t._v(" "),s("td",[t._v("从配置文件和 Shell 语句中读取与合并参数，得出最终的参数。 这个过程中还会执行配置文件中的插件实例化语句 "),s("code",[t._v("new Plugin()")]),t._v("。")])]),t._v(" "),s("tr",[s("td",[t._v("实例化 Compiler")]),t._v(" "),s("td",[t._v("用上一步得到的参数初始化 Compiler 实例，Compiler 负责文件监听和启动编译。Compiler 实例中包含了完整的 Webpack 配置，全局只有一个 Compiler 实例。")])]),t._v(" "),s("tr",[s("td",[t._v("加载插件")]),t._v(" "),s("td",[t._v("依次调用插件的 apply 方法，让插件可以监听后续的所有事件节点。同时给插件传入 compiler 实例的引用，以方便插件通过 compiler 调用 Webpack 提供的 API。")])]),t._v(" "),s("tr",[s("td",[t._v("environment")]),t._v(" "),s("td",[t._v("开始应用 Node.js 风格的文件系统到 compiler 对象，以方便后续的文件寻找和读取。")])]),t._v(" "),s("tr",[s("td",[t._v("entry-option")]),t._v(" "),s("td",[t._v("读取配置的 Entrys，为每个 Entry 实例化一个对应的 EntryPlugin，为后面该 Entry 的递归解析工作做准备。")])]),t._v(" "),s("tr",[s("td",[t._v("after-plugins")]),t._v(" "),s("td",[t._v("调用完所有内置的和配置的插件的 apply 方法。")])]),t._v(" "),s("tr",[s("td",[t._v("after-resolvers")]),t._v(" "),s("td",[t._v("根据配置初始化完 resolver，resolver 负责在文件系统中寻找指定路径的文件。")])])])])},function(){var t=this._self._c;return t("h2",{attrs:{id:"项目优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#项目优化"}},[this._v("#")]),this._v(" 项目优化")])},function(){var t=this,s=t._self._c;return s("ol",[s("li",[s("p",[t._v("自动构建HTML，可压缩空格，可给引用的js加版本号或随机数：html-webpack-plugin")])]),t._v(" "),s("li",[s("p",[t._v("处理CSS：css-loader与style-loader")])]),t._v(" "),s("li",[s("p",[t._v("处理LESS：less-loade与less")])]),t._v(" "),s("li",[s("p",[t._v("提取css代码到css文件中： extract-text-webpack-plugin")])]),t._v(" "),s("li",[s("p",[t._v("开发环境下的服务器搭建：webpack-dev-server")])]),t._v(" "),s("li",[s("p",[t._v("解析ES6代码：babel-core babel-preset-env babel-loader")])]),t._v(" "),s("li",[s("p",[t._v("解析ES6新增的对象函数：babel-polyfill")])]),t._v(" "),s("li",[s("p",[t._v("解析react的jsx语法：babel-preset-react")])]),t._v(" "),s("li",[s("p",[t._v("转换相对路径到绝度路径：nodejs的path模块")])]),t._v(" "),s("li",[s("p",[t._v("给文件加上hash值：[chunkhash],[hash]")])]),t._v(" "),s("li",[s("p",[t._v("清空输出文件夹之前的输出文件：clean-webpack-plugin")])]),t._v(" "),s("li",[s("p",[t._v("模块热替换：NamedModulesPlugin和HotModuleReplacementPlugin")])]),t._v(" "),s("li",[s("p",[t._v("环境变量")])]),t._v(" "),s("li",[s("p",[t._v("跨平台使用环境变量: cross-env")])]),t._v(" "),s("li",[s("p",[t._v("处理图片路径: file-loader和html-loader")])]),t._v(" "),s("li",[s("p",[t._v("图片压缩：image-webpack-loader")])]),t._v(" "),s("li",[s("p",[t._v("定位源文件代码：source-map")])]),t._v(" "),s("li",[s("p",[t._v("分离生产环境和开发环境的配置文件")])]),t._v(" "),s("li",[s("p",[t._v("webpack输出文件体积与交互关系的可视化：webpack-bundle-analyzer")])])])},function(){var t=this._self._c;return t("p",[t("strong",[this._v("链接：https://www.cnblogs.com/vvjiang/p/8571983.html")])])},function(){var t=this._self._c;return t("p",[t("strong",[this._v("优化链接：https://juejin.im/post/6844904071736852487#heading-14")])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"webpack-bundle-analyzer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-bundle-analyzer"}},[this._v("#")]),this._v(" webpack-bundle-analyzer")])},function(){var t=this._self._c;return t("p",[t("strong",[this._v("首先最重要的点是在于，打包之后对打包的文件进行分析，才好下手优化。")])])},function(){var t=this._self._c;return t("ul",[t("li",[t("strong",[this._v("安装webpack 文件体积和依赖关系可视化的图 webpack-bundle-analyzer")])]),this._v(" "),t("li",[t("strong",[this._v("配置好，打包之后会自动展示打包的结果")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" BundleAnalyzerPlugin "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-bundle-analyzer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("merge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BundleAnalyzerPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("analyzerPort")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8919")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this._self._c;return t("p",[this._v("如果有很多公共的文件，可以提取通用的模块文件"),t("strong",[this._v("commonsChunkPlugin")])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"commonschunkplugin-提取通用模块文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#commonschunkplugin-提取通用模块文件"}},[this._v("#")]),this._v(" CommonsChunkPlugin 提取通用模块文件")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entry")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-polyfill'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/app.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vendor")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-router-dom'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-redux'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'redux-actions'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommonsChunkPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("names")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vendor'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("minChunks")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("Infinity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("filename")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'common.bundle.[chunkhash].js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this._self._c;return t("h3",{attrs:{id:"压缩-js、css、图片"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#压缩-js、css、图片"}},[this._v("#")]),this._v(" 压缩 js、CSS、图片")])},function(){var t=this._self._c;return t("h3",{attrs:{id:"去掉开发环境的配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#去掉开发环境的配置"}},[this._v("#")]),this._v(" 去掉开发环境的配置")])},function(){var t=this._self._c;return t("h3",{attrs:{id:"提取-manifest：-公共js的hash值不要改变"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#提取-manifest：-公共js的hash值不要改变"}},[this._v("#")]),this._v(" 提取 manifest： 公共js的hash值不要改变")])},function(){var t=this._self._c;return t("h3",{attrs:{id:"webpack-parallel-uglify-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#webpack-parallel-uglify-plugin"}},[this._v("#")]),this._v(" webpack-parallel-uglify-plugin")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ParallelUglifyPlugin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-parallel-uglify-plugin'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ParallelUglifyPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 传递给 UglifyJS 的参数 如果解压ES6 使用 uglifyES")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("uglifyJS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最紧凑的输出")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("beautify")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除所有的注释")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("comments")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("compress")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在UglifyJs删除没有用到的代码时不输出警告")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("warnings")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 删除所有的 `console` 语句，可以兼容ie浏览器")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("drop_console")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 内嵌定义了但是只用到一次的变量")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("collapse_vars")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 提取出出现多次但是没有定义成变量去引用的静态值")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("reduce_vars")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])}],!1,null,null,null);s.default=r.exports}}]);